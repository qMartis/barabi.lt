(b=>{b(".settings-group.icons .boxes .box label").on("click",function(){var t=b(this).children().attr("src");b(".settings-group.size .boxes .box label img").attr("src",t),b(".settings-group.border .boxes .box label img").attr("src",t),b(".sidebar-preview .preview-viewport button img").attr("src",t)}),b(".settings-group.size .boxes .box label").on("click",function(){"design-size1"===b(this).find("input").val()?b(".sidebar-preview .preview-viewport button img").css({padding:"10px",width:"50px",height:"50px"}):"design-size2"!==b(this).find("input").val()&&"design-size3"===b(this).find("input").val()?b(".sidebar-preview .preview-viewport button img").css({padding:"17.5px",width:"80px",height:"80px"}):b(".sidebar-preview .preview-viewport button img").css({padding:"15px",width:"65px",height:"65px"})}),b(".settings-group.border .boxes .box label").on("click",function(){var t=b(".settings-group.color .box1").attr("style"),t=t?t.match(/--outline-color:\s*(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3})/):null,t=t?t[1]:null;"design-border1"===b(this).find("input").val()?b(".sidebar-preview .preview-viewport button img").css({border:"solid 2px #fff","box-shadow":"0 0 0 4px "+t}):(b(this).find("input").val(),b(".sidebar-preview .preview-viewport button img").css({border:"none","box-shadow":"none"}))}),b(".settings-group.color .box3 ul li").on("click",function(){var t=b(this).data("color");b(".sidebar-preview .preview-viewport button img").css({"background-color":t}),b(".setting-control.radio-image .boxes .box label img").css({"background-color":t}),"design-border1"===b(".settings-group.border .boxes .box label input").val()?(b(".sidebar-preview .preview-viewport button img").css({border:"solid 2px #fff","box-shadow":"0 0 0 4px "+t}),b(".settings-group.border .setting-control.radio-image .boxes .box1 label img").css({border:"solid 2px #fff","box-shadow":"0 0 0 4px "+t})):"design-border2"===b(".settings-group.border .boxes .box label input").val()&&b(".sidebar-preview .preview-viewport button img").css({border:"none","box-shadow":"none"}),b(".settings-group.color .color-result").text(t),b(".settings-group.color .wp-color-picker").val(t).trigger("change")});let i={"top-right":{bottom:"83%","margin-top":"40px",right:"0","margin-right":"40px"},"top-left":{bottom:"83%","margin-top":"40px",left:"0","margin-left":"40px"},"middle-right":{right:"0","margin-right":"40px",bottom:"50%","margin-bottom":"40px"},"middle-left":{left:"0","margin-left":"40px",bottom:"50%","margin-bottom":"40px"},"bottom-right":{right:"0","margin-right":"40px",bottom:"0","margin-bottom":"40px"},"bottom-left":{left:"0","margin-left":"40px",bottom:"0","margin-bottom":"40px"}},o={top:"",right:"",bottom:"",left:"","margin-top":"","margin-right":"","margin-bottom":"","margin-left":""};function s(t,e){e=b(`.sidebar-preview .viewport-${e} button`);e.css(o),i[t]&&e.css(i[t])}function a(e,i,o){let t;"desktop"===e?t=`.settings-group.widge-position.${e} select`:"tablet"===e?t=`.settings-group.widge-position-tablet.${e} select`:"mobile"===e&&(t=`.settings-group.widge-position-mobile.${e} select`);var n=b(t).val(),s={desktop:{leftRight:{baseValue:20,multiplier:.8},topBottom:{baseValue:40,multiplier:1.1}},tablet:{leftRight:{baseValue:230,multiplier:1},topBottom:{baseValue:20,multiplier:1.1}},mobile:{leftRight:{baseValue:325,multiplier:1.1},topBottom:{baseValue:15,multiplier:1}}}[e];if(s){let t;if("left-right"===i)t=s.leftRight.baseValue+parseInt(o)*s.leftRight.multiplier+"px";else{if("top-bottom"!==i)return void console.warn("Invalid direction: "+i);t=s.topBottom.baseValue+parseInt(o)*s.topBottom.multiplier+"px"}o=b(`.sidebar-preview .viewport-${e} button`);"top-bottom"===i?n&&n.includes("top")?o.css({"margin-top":t,top:0}):o.css("margin-bottom",t):"left-right"===i&&(n&&n.includes("left")?o.css({"margin-left":t,left:0}):o.css("margin-right",t))}else console.warn("No configuration found for device type: "+e)}function l(t,e){b(`.sidebar-preview .viewport-${t} button`).css("display",e?"none":"block")}b(".settings-group.widge-position.desktop select").on("change",function(){s(b(this).val(),"desktop");var t=b(".settings-group.position-top-bottom.desktop input").val(),e=b(".settings-group.position-left-right.desktop input").val();t&&a("desktop","top-bottom",t),e&&a("desktop","left-right",e)}),b(".settings-group.widge-position-tablet.tablet select").on("change",function(){s(b(this).val(),"tablet");var t=b(".settings-group.position-top-bottom-tablet.tablet input").val(),e=b(".settings-group.position-left-right-tablet.tablet input").val();t&&a("tablet","top-bottom",t),e&&a("tablet","left-right",e)}),b(".settings-group.widge-position-mobile.mobile select").on("change",function(){s(b(this).val(),"mobile");var t=b(".settings-group.position-top-bottom-mobile.mobile input").val(),e=b(".settings-group.position-left-right-mobile.mobile input").val();t&&a("mobile","top-bottom",t),e&&a("mobile","left-right",e)}),b(".settings-group.position-top-bottom.desktop input").on("change",function(){a("desktop","top-bottom",b(this).val())}),b(".settings-group.position-top-bottom-tablet.tablet input").on("change",function(){a("tablet","top-bottom",b(this).val())}),b(".settings-group.position-top-bottom-mobile.mobile input").on("change",function(){a("mobile","top-bottom",b(this).val())}),b(".settings-group.position-left-right.desktop input").on("change",function(){a("desktop","left-right",b(this).val())}),b(".settings-group.position-left-right-tablet.tablet input").on("change",function(){a("tablet","left-right",b(this).val())}),b(".settings-group.position-left-right-mobile.mobile input").on("change",function(){a("mobile","left-right",b(this).val())}),b(".settings-group.toggle-device-position-desktop input").on("change",function(){l("desktop",b(this).is(":checked"))}),b(".settings-group.toggle-device-position-tablet.tablet input").on("change",function(){l("tablet",b(this).is(":checked"))}),b(".settings-group.toggle-device-position-mobile.mobile input").on("change",function(){l("mobile",b(this).is(":checked"))});{var e=b("#company_website");let t=b(".protocol");e.on("focus",function(){t.addClass("focus")}),e.on("blur",function(){t.removeClass("focus")})}function n(t){let e=t.checkbox.is(":checked")?"addClass":"removeClass";t.elements.forEach(t=>{t[e]("hide")})}function t(){var t=b('select[name="onetap_settings[language]"]'),e=t.find("option:selected").text(),e=b("<span>").text(e).css({position:"absolute",visibility:"hidden","white-space":"nowrap","font-family":t.css("font-family"),"font-size":t.css("font-size"),"font-weight":t.css("font-weight")}).appendTo("body"),i=e.width();e.remove(),t.closest(".settings-group.language .box1").find(".badge").css({left:i+23+"px",display:"inline-block"})}if(b(document).ready(function(){var t=b(".settings-group.color .box1").attr("style"),t=t?t.match(/--outline-color:\s*(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3})/):null,t=t?t[1]:null,e=new URLSearchParams(window.location.search).get("page");if(e){let t=e.replace(/-/g,"_");t.includes("accessibility_onetap")&&(t=t.replace("accessibility_","")),b("#"+t).fadeIn(400),"apop_settings"!==t&&"onetap_settings"!==t||b(".sidebar-preview").fadeIn(400),"apop_accessibility_status"!==t&&"accessibility-onetap-accessibility-status"!==t||b("#apop-accessibility-status").fadeIn(400)}["desktop","tablet","mobile"].forEach(function(t){let e;"desktop"===t?e=`.settings-group.widge-position.${t} select`:"tablet"===t?e=`.settings-group.widge-position-tablet.${t} select`:"mobile"===t&&(e=`.settings-group.widge-position-mobile.${t} select`);var i=b(e).val();i&&s(i,t);let o,n;"desktop"===t?(o=b(`.settings-group.position-top-bottom.${t} input`).val(),n=b(`.settings-group.position-left-right.${t} input`).val()):"tablet"===t?(o=b(".settings-group.position-top-bottom-tablet.tablet input").val(),n=b(".settings-group.position-left-right-tablet.tablet input").val()):"mobile"===t&&(o=b(".settings-group.position-top-bottom-mobile.mobile input").val(),n=b(".settings-group.position-left-right-mobile.mobile input").val()),o&&a(t,"top-bottom",o),n&&a(t,"left-right",n),l(t,b(`.settings-group.toggle-device-position-${t} input`).is(":checked"))});e=b('.settings-group.size .boxes .box input[type="radio"]:checked').val(),e&&("design-size1"===e?b(".sidebar-preview .preview-viewport button img").css({padding:"10px",width:"50px",height:"50px"}):"design-size2"!==e&&"design-size3"===e?b(".sidebar-preview .preview-viewport button img").css({padding:"17.5px",width:"80px",height:"80px"}):b(".sidebar-preview .preview-viewport button img").css({padding:"15px",width:"65px",height:"65px"})),t&&(b(".sidebar-preview .preview-frame .preview-container .preview-viewport button img").css({"background-color":t}),b(".setting-control.radio-image .boxes .box label img").css({"background-color":t}),b(".settings-group.border .boxes .box1 img").css({"box-shadow":"0 0 0 4px "+t})),e=b('.settings-group.border .boxes .box input[type="radio"]:checked').val();e&&("design-border1"===e?b(".sidebar-preview .preview-viewport button img").css({border:"solid 2px #fff","box-shadow":"0 0 0 4px "+t,"background-color":t}):b(".sidebar-preview .preview-viewport button img").css({border:"none","box-shadow":"none"}))}),(e=b('.settings-group.icons .boxes .box input[type="radio"]:checked').closest("label").find("img").attr("src"))&&(b(".settings-group.size .boxes .box label img").attr("src",e),b(".settings-group.border .boxes .box label img").attr("src",e)),[{device:"desktop",checkbox:b('input[name="onetap_settings[toggle-device-position-desktop]"]'),elements:[b(".settings-group.widge-position.desktop"),b(".settings-group.position-top-bottom.desktop"),b(".settings-group.position-left-right.desktop")]},{device:"tablet",checkbox:b('input[name="onetap_settings[toggle-device-position-tablet]"]'),elements:[b(".settings-group.widge-position-tablet.tablet"),b(".settings-group.position-top-bottom-tablet.tablet"),b(".settings-group.position-left-right-tablet.tablet")]},{device:"mobile",checkbox:b('input[name="onetap_settings[toggle-device-position-mobile]"]'),elements:[b(".settings-group.widge-position-mobile.mobile"),b(".settings-group.position-top-bottom-mobile.mobile"),b(".settings-group.position-left-right-mobile.mobile")]}].forEach(t=>{n(t),t.checkbox.on("change",function(){n(t)})}),t(),b('select[name="onetap_settings[language]"]').on("change",function(){t()}),"undefined"!=typeof adminLocalize&&"string"==typeof adminLocalize.activeLanguage&&""!==adminLocalize.activeLanguage.trim()&&"object"==typeof adminLocalize.localizedLabels&&adminLocalize.localizedLabels.hasOwnProperty(adminLocalize.activeLanguage)){var r,e=adminLocalize.activeLanguage,p=adminLocalize.localizedLabels[e];for(r in p)p.hasOwnProperty(r)&&b(".admin_page_apop-module-labels input."+r).attr("value",p[r])}var g;(e=adminLocalize.activeLanguage)&&(g=b(`.current-language li[data-language="${e}"]`).text(),e=b(`.current-language li[data-language="${e}"] img`).attr("src"),g)&&e&&(b("a.current-language .text strong").text(g),b("a.current-language .image img.active").attr("src",e),b("a.current-language").show()),b(".copy").on("click",function(){var t="editor_generator";let e="",i=(e="undefined"!=typeof tinymce&&tinymce.get(t)?tinymce.get(t).getContent():b("#"+t).val(),b(this)),o=i.find(".copy-text"),n=i.data("default-text")||"Copy",s=i.data("copied-text")||"Copied!";navigator.clipboard.writeText(e).then(()=>{o.text(s),i.addClass("copied"),setTimeout(()=>{o.text(n),i.removeClass("copied")},2e3)})});{let l=b('select[name="onetap_select_language"]'),r=b('input[name="onetap_company_name"]'),p=b('input[name="onetap_company_website"]'),g=b('input[name="onetap_business_email"]'),c=b('input[name="onetap_confirmation_checkbox"]'),s=b("button.save-changes.generate-accessibility-statement");function d(){var t=(l.val()||"").trim(),e=(r.val()||"").trim(),i=(p.val()||"").trim(),o=(g.val()||"").trim(),n=c.is(":checked");t&&e&&i&&o&&n?s.addClass("active"):s.removeClass("active")}l.on("input",d),r.on("input",d),p.on("input",d),g.on("input",d),c.on("change",d),d(),s.on("click",function(e){var i=(l.val()||"").trim(),o=(r.val()||"").trim(),n=(p.val()||"").trim(),s=(g.val()||"").trim(),a=c.is(":checked");if(i&&o&&n&&s&&a){a=b('.status-message-accessibility[data-content-lang="'+i+'"]'),i=""+(new Date).toLocaleDateString(i||"en",{year:"numeric",month:"long",day:"numeric"});let t=a.html();t=t.replace(/\[Company Name\]/g,o).replace(/\[Company Website\]/g,n).replace(/\[Company E-Mail\]/g,s).replace(/\[March 9, 2025\]/g,i);a=tinymce.get("editor_generator");a&&a.setContent(t),e.preventDefault()}else e.preventDefault(),swal({title:"Warning!",text:"Please complete all fields.",icon:"info",showCloseButton:!0})})}b(".box-image-alt .button.edit-btn").on("click",function(){var t=b(this),e=t.closest(".row").find(".col.alt-text").find(".text"),i=t.data("image-id"),o=e.text();t.addClass("hide"),t.siblings(".save-btn").removeClass("hide"),e.replaceWith('<textarea data-image-id="'+i+'">'+o+"</textarea>")}),b(document).on("click",".box-image-alt .button.save-btn",function(){let e=b(this);let i=e.closest(".row").find(".col.alt-text").find("textarea");var t=e.data("image-id");let o=i.val();b.ajax({url:adminLocalize.ajaxUrl,method:"POST",data:{nonce:adminLocalize.ajaxNonce,action:"onetap_save_alt_text",image_id:t,alt_text:o},success(t){t.success?(e.addClass("hide"),e.siblings(".edit-btn").removeClass("hide"),i.replaceWith('<span class="text">'+o+"</span>"),"undefined"!=typeof swal&&swal({title:"Success!",text:"Alt text saved successfully",icon:"success",timer:2e3,showConfirmButton:!1})):"undefined"!=typeof swal&&swal({title:"Error!",text:t.error||"Failed to save alt text",icon:"error"})},error(t,e,i){console.error("Error saving alt text:",i),"undefined"!=typeof swal&&swal({title:"Error!",text:"Failed to save alt text. Please try again.",icon:"error"})}})}),b(document).on("click",".button.disable.prev-btn, .button.disable.next-btn",function(t){return t.preventDefault(),!1}),b(document).ready(function(){var t,e;t=b(".box-current-language"),e=b(".settings-group.accessibility-information .setting-control.module-labels .setting-title"),t.length&&e.length&&(0===e.find(".box-current-language").length?((t=t.first().clone(!0,!0)).css("display","block"),e.append(t)):e.find(".box-current-language").css("display","block"))})})(jQuery);