var waitForEl=function(e,l){jQuery(e).length?setTimeout(function(){l()},visody_check_interval):setTimeout(function(){waitForEl(e,l)},visody_check_interval)};!function(e){"use strict";function l(){e(".vsd-model-viewer model-viewer").bind("progress",function(l){e(this).find(".vsd-model-viewer-loader-progress").css("width",parseInt(100*l.detail.totalProgress)+"%"),e(this).find(".vsd-model-viewer-loader-value").text(parseInt(100*l.detail.totalProgress)+"%")}),e(".vsd-model-viewer model-viewer").bind("ar-status",function(l){if("failed"===l.detail.status){var o=e(l.target).find(".vsd-ar-failed");o.removeClass("hide"),o.bind("transitionend",e=>{setTimeout(function(){o.addClass("hide")},1e3)}),e(".vsd-model-viewer-ar-desktop").attr("disabled","disabled"),e(".vsd-model-viewer-ar-button").attr("disabled","disabled")}else e(".vsd-model-viewer-ar-button").removeClass("loading")}),e(".vsd-model-viewer model-viewer").bind("load",function(l){e(this).find(".vsd-model-viewer-loader").hide(),e(this).parents(".vsd-model-viewer").addClass("loaded");var o=e(this).parents(".vsd-model-viewer").attr("id");e('.vsd-model-viewer-control-buttons[data-viewer-id="'+o+'"]').addClass("loaded"),!e(this).parents(".vsd-model-viewer").hasClass("vsd-model-viewer-loop")&&e(this).parents(".vsd-model-viewer").hasClass("vsd-model-viewer-inline")&&e(visody_gallery_trigger).length&&e(visody_gallery_trigger).hide(),e(".vsd-model-viewer-ar-button").removeClass("loading")}),(e(".vsd-model-viewer .vsd-model-viewer-zoom-in-button").length||e('.vsd-model-viewer model-viewer[data-zoom="manual"]').length)&&e(".vsd-model-viewer model-viewer").each(function(e,l){l.addEventListener("wheel",e=>{e.stopPropagation()},!0)})}function o(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||e(visody_gallery+" .vsd-model-viewer").removeClass("fullscreen")}function t(l){return l||(l=document.body),document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen?(e(visody_gallery+" .vsd-model-viewer").removeClass("fullscreen"),function e(){var l=document,o=l.cancelFullScreen||l.webkitCancelFullScreen||l.mozCancelFullScreen||l.exitFullscreen||l.webkitExitFullscreen;if(o)o.call(l);else if(void 0!==window.ActiveXObject){var t=new ActiveXObject("WScript.Shell");null!==t&&t.SendKeys("{F11}")}}()):(e(visody_gallery+" .vsd-model-viewer").addClass("fullscreen"),function e(l){var o=l.requestFullScreen||l.webkitRequestFullScreen||l.mozRequestFullScreen||l.msRequestFullscreen;if(o)o.call(l);else if(void 0!==window.ActiveXObject){var t=new ActiveXObject("WScript.Shell");null!==t&&t.SendKeys("{F11}")}return!1}(l)),!1}e(document).ready(function(){if(l(),e(visody_gallery+" .vsd-model-viewer-overlay").length&&(e(visody_gallery_slide).length>1?waitForEl(visody_gallery_active_slide,function(){var l=e(visody_gallery_active_slide);e(visody_gallery+" .vsd-model-viewer").width(l.width()),e(visody_gallery+" .vsd-model-viewer").height(l.height()),e(visody_gallery+" .vsd-model-viewer-overlay").addClass("loaded")}):e(visody_gallery_slide).length&&waitForEl(visody_gallery_slide,function(){var l=e(visody_gallery_slide);e(visody_gallery+" .vsd-model-viewer").width(l.width()),e(visody_gallery+" .vsd-model-viewer").height(l.height()),e(visody_gallery+" .vsd-model-viewer-overlay").addClass("loaded")}),e(window).on("resize",function(){if(!(document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen)){if(e(visody_gallery_slide).length>1)var l=e(visody_gallery_active_slide);else var l=e(visody_gallery_slide);e(visody_gallery+" .vsd-model-viewer").width(l.width()),e(visody_gallery+" .vsd-model-viewer").height(l.height())}})),e(visody_gallery).length){var o="";e(".vsd-model-viewer-control-buttons.control-buttons-gallery.hidden").length&&(o=e(".vsd-model-viewer-control-buttons.control-buttons-gallery.hidden").get(0).outerHTML,e(".vsd-model-viewer-control-buttons.control-buttons-gallery.hidden").remove()),e(visody_gallery_slide).length>1?waitForEl(visody_gallery_active_slide,function(){l(),e(visody_gallery).append(o),e(".vsd-model-viewer-control-buttons.control-buttons-gallery").removeClass("hidden"),e(".vsd-model-viewer-inline model-viewer").trigger("load")}):waitForEl(visody_gallery_slide,function(){l(),e(visody_gallery).append(o),e(".vsd-model-viewer-control-buttons.control-buttons-gallery").removeClass("hidden"),e(".vsd-model-viewer-inline model-viewer").trigger("load")})}e(visody_gallery+" .vsd-model-viewer-last-slide").length&&e(visody_gallery_slide).length>1&&waitForEl(visody_gallery_slide,function(){var o=e(visody_gallery+" .vsd-model-viewer-last-slide").get(0).outerHTML;e(visody_gallery+" .vsd-model-viewer-last-slide").remove(),e(visody_gallery_active_slide).removeClass("vsd-model-viewer__image"),e(visody_gallery_slide+":last-child").addClass("vsd-model-viewer__image"),e(visody_gallery_slide+":last-child").append(o),l()}),e(document).on("click",".vsd-model-viewer-ar-button",function(){e(this).parents(".vsd-model-viewer-control-buttons").length?e(this).parents(".vsd-model-viewer-control-buttons").hasClass("loaded")||e(this).addClass("loading"):e(this).parents(".vsd-model-viewer").hasClass("loaded")||e(this).addClass("loading")}),e(document).on("click",".vsd-model-viewer .vsd-model-viewer-zoom-in-button",function(l){l.preventDefault(),e(this).closest(".vsd-model-viewer").find("model-viewer").get(0).zoom(visody_zoom_factor)}),e(document).on("click",".vsd-model-viewer .vsd-model-viewer-zoom-out-button",function(l){l.preventDefault(),e(this).closest(".vsd-model-viewer").find("model-viewer").get(0).zoom(-visody_zoom_factor)}),e(document).on("click",visody_gallery+" .vsd-model-viewer-3d-button",function(l){l.preventDefault(),e(visody_gallery+" .vsd-model-viewer").addClass("active"),e(visody_gallery_trigger).length&&e(visody_gallery_trigger).hide()}),e(document).on("click",visody_gallery+" .vsd-model-viewer .vsd-model-viewer-fs-button",function(l){l.preventDefault(),t(e(".vsd-model-viewer").get(0))}),e(document).on("click",visody_gallery+" .vsd-model-viewer.fullscreen .vsd-model-viewer-close-button",function(l){l.preventDefault(),document.activeElement.blur(),t(e(".vsd-model-viewer").get(0))}),e(document).on("click",visody_gallery+" .vsd-model-viewer-close-button",function(l){l.preventDefault(),!(document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen)&&(e(visody_gallery+" .vsd-model-viewer").removeClass("active"),e(visody_gallery_trigger).length&&e(visody_gallery_trigger).show())}),e(document).on("click",".vsd-model-viewer .vsd-model-viewer-cam-button",function(l){l.preventDefault();var o=e(this).data("title")||"capture",t=e(this).closest(".vsd-model-viewer").find("model-viewer").get(0).toDataURL(),r=document.createElement("a");r.style.display="none",document.body.appendChild(r),r.href=t,r.download=o+".png",r.click(),window.setTimeout(()=>{document.body.removeChild(r)},100)}),e(document).on("click",".vsd-model-viewer-control-buttons.control-buttons-gallery .vsd-model-viewer-3d-button",function(l){l.preventDefault(),e(visody_gallery+" .vsd-model-viewer").addClass("active"),e(visody_gallery_trigger).length&&e(visody_gallery_trigger).hide()}),e(document).on("click",".vsd-model-viewer-control-buttons.control-buttons-gallery .vsd-model-viewer-ar-button",function(l){l.preventDefault(),e(visody_gallery+" .vsd-model-viewer").addClass("active"),e(visody_gallery+" .vsd-model-viewer .vsd-model-viewer-ar-button").trigger("click"),e(visody_gallery+" .vsd-model-viewer").removeClass("active")}),e(document).on("click touchstart",visody_gallery_control_thumbs_item,function(l){l.preventDefault();var o=e(visody_gallery_active_slide);e(visody_gallery+" .vsd-model-viewer-overlay").width(o.width()),e(visody_gallery+" .vsd-model-viewer-overlay").height(o.height()),e(visody_gallery_trigger).length&&(e(visody_gallery_active_slide+" .vsd-model-viewer-inline").length?e(visody_gallery_trigger).hide():e(visody_gallery_trigger).show())}),e(document).keyup(function(l){var o=document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen;"Escape"!==l.key||o||e(visody_gallery+" .vsd-model-viewer").removeClass("active")}),e(document).on("qv_loader_stop",function(){e(document).find("#yith-quick-view-content .vsd-model-viewer").length&&l()});var r="";e(".wpgs-for").length&&waitForEl(".wpgs-for .vsd-model-viewer",function(){r=e(".wpgs-for .vsd-model-viewer").get(0).outerHTML}),e(".wcgs-carousel").length&&waitForEl(".wcgs-carousel .vsd-model-viewer",function(){r=e(".wcgs-carousel .vsd-model-viewer").get(0).outerHTML}),e(".woo-variation-product-gallery").length&&waitForEl(".woo-variation-product-gallery .vsd-model-viewer",function(){r=e(".woo-variation-product-gallery .vsd-model-viewer").get(0).outerHTML}),e(".theme-woodmart .woocommerce-product-gallery .owl-carousel").length&&waitForEl(".woocommerce-product-gallery .owl-carousel",function(){r=e(".woocommerce-product-gallery .owl-carousel .vsd-model-viewer").get(0).outerHTML}),e(document).on("show_variation",".variations_form",function(o,t){e(".wpgs_image").length&&waitForEl(".wpgs_image.woocommerce-product-gallery__image",function(){e(".wpgs_image .vsd-model-viewer").remove(),e(".wpgs_image.woocommerce-product-gallery__image").append(r),l()}),e(".wvg-gallery-image").length&&waitForEl(".wvg-gallery-image",function(){e(".wvg-gallery-image .vsd-model-viewer").remove(),e(".wvg-gallery-image").append(r),l()}),e(".theme-woodmart .woocommerce-product-gallery .owl-item .product-image-wrap").length&&(e(".theme-woodmart .woocommerce-product-gallery .owl-item:first-child .product-image-wrap .vsd-model-viewer").remove(),e(".theme-woodmart .woocommerce-product-gallery .owl-item:first-child .product-image-wrap").append(r),l())}),e(document).on("reset_data",".variations_form",function(o){e(".wpgs_image").length&&setTimeout(function(){e(".wpgs_image").append(r),l()},visody_check_interval),e(".wvg-gallery-image").length&&setTimeout(function(){e(".wvg-gallery-image").append(r),l()},visody_check_interval),e(".theme-woodmart .woocommerce-product-gallery .owl-item .product-image-wrap").length&&setTimeout(function(){e(".theme-woodmart .woocommerce-product-gallery .owl-item:first-child .product-image-wrap").append(r),l()},visody_check_interval)})}),window.visodyBindViewerEventHandlers=()=>{l()},document.addEventListener("fullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("mozfullscreenchange",o),document.addEventListener("MSFullscreenChange",o)}(jQuery);